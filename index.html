<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeLife</title>
    <meta name="description" content="Really simple proxy made by HAMPER.">
    <meta name="keywords" content="HTML, CSS, JavaScript, proxy, webproxy, python, server, simple">
    <meta name="author" content="HAMPER">
    <link rel="icon" type="image/png" href="/favicon.png">
</head>
<body style="background-image: url('/bg.png'); background-repeat: no-repeat; background-size: cover;">
    <center><div><h1 style="color: black">Safe<a style="color: grey;">Life</a></h1></div></center>
    <center><div><input id="smashanpass" />
    <button onclick="getData()">Proxy</button></div>
    <div id="output"></div>
    <div><input id="sigmaskibididontquestionit" /><button onclick="setserver()">Change SafeLife Hub</button><p id="ineedtoshit">Status: ðŸŸ¡</p> <p style="color: red;" id="shitta">CURRENT SERVER: Unknown</p></div></center>
    <a href="https://github.com/HAMPERHAMPS/safelife" class="safelife-link" style="padding: 10px;">SafeLife GitHub</a>
    <a href="https://github.com/HAMPERHAMPS/safelife-hub/tree/main" class="safelife-hub-link" style="padding: 10px;">SafeLife Hub GitHub</a>
    <a href="https://hamperhamps.space" class="personal-website-link" style="padding: 10px;">My Space</a>

    <script>
        var lastRemadeURL = '';
        var url = null;
        var proxyserverd = 'https://safelifehub.hamperhamps.space/';
        function setserver() {
            var inputElement = document.getElementById('sigmaskibididontquestionit');
            proxyserverd = inputElement.value.trim();
        }
            
        
        function fetchData(url) {
            lastRemadeURL = url;
            fetch(proxyserverd + `?url=${encodeURIComponent(url)}`)
                .then(response => response.json())
                .then(data => {
                    if (data.content) {
                        document.open();
                        document.write(data.content);
                        document.close();
                        
                    } else {
                        document.getElementById('output').innerHTML = '<p style="color: red;">The site does not exist or could not be fetched.</p>';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('output').innerHTML = '<p style="color: red;">Womp Womp. Your SafeLife Hub is down/broken</p>';
                });
        }

       
        function getData() {
            var inputElement = document.getElementById('smashanpass');
            url = inputElement.value.trim(); 
            
            if (url) {
                fetchData(url);
            } else {
                document.getElementById('output').innerHTML = '<p style="color: red;">Please enter a valid URL.</p>';
            }
        }


        

       
        setInterval(function() {
            var links = document.getElementsByTagName('a');
            for (var i = 0; i < links.length; i++) {
                if (!links[i].hasAttribute('data-handled')) {
                    links[i].setAttribute('data-handled', true); 
                    links[i].addEventListener('click', function(event) {
                        event.preventDefault(); 
                        var urlsd = this.href;
                        if (urlsd.includes("http")) {
                            console.log("u good bro");
                            console.log(lastRemadeURL);
                        }
                        else {
                            let currentUrl = window.location.href;
                            console.log(currentUrl);
                           
                            urlsd = lastRemadeURL + urlsd;
                            urlsd = urlsd + '/';
                            urlsd.replace(currentUrl, "");
                             
                            console.log("Attemptus petronum");
                            console.log(urlsd);
                        }
                        fetchData(urlsd);
                    });
                }
            }
        }, 1000);
        async function checkWebsiteStatus() {
            try {
                const response = await fetch(proxyserverd + 'ping');
                if (response.ok) {
                    document.getElementById('ineedtoshit').textContent = 'Status: ðŸŸ¢';
                } else {
                    document.getElementById('ineedtoshit').textContent = 'Status: ðŸ”´';
                }
            } catch (error) {
                document.getElementById('ineedtoshit').textContent = 'Status: ðŸ”´';
                console.error('Error:', error);
            }
            document.getElementById('shitta').textContent = 'CURRENT SERVER: ' + proxyserverd;
        }

        
        setInterval(checkWebsiteStatus, 1000);
                    



    </script>
</body>
</html>
